{
    "info": {
        "name": "Cacoon",
        "description": "Collection for testing Cacoon endpoints",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Authentication",
            "item": [
                {
                    "name": "Login - Request OTP",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email_or_nik\": \"john@example.com\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/login",
                            "host": ["{{base_url}}"],
                            "path": ["api", "login"]
                        },
                        "description": "Request OTP token to be sent to user's email"
                    }
                },
                {
                    "name": "Verify Token",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 200) {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.environment.set(\"access_token\", jsonData.access_token);",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"john@example.com\",\n    \"token\": \"123456\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/verify-token",
                            "host": ["{{base_url}}"],
                            "path": ["api", "verify-token"]
                        },
                        "description": "Verify OTP token and get access token"
                    }
                },
                {
                    "name": "Logout",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/logout",
                            "host": ["{{base_url}}"],
                            "path": ["api", "logout"]
                        },
                        "description": "Logout and invalidate token"
                    }
                }
            ]
        },
        {
            "name": "Token",
            "item": [
                {
                    "name": "Refresh Token",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 200) {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.environment.set(\"access_token\", jsonData.access_token);",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/refresh-token",
                            "host": ["{{base_url}}"],
                            "path": ["api", "refresh-token"]
                        },
                        "description": "Refresh access token"
                    }
                }
            ]
        },
        {
            "name": "Vessel",
            "item": [
                {
                    "name": "Get Vessel",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/vessel?page=1&limit=10",
                            "host": ["{{base_url}}"],
                            "path": ["api", "vessel"],
                            "query": [
                                {
                                    "key": "page",
                                    "value": "1",
                                    "description": "Page number for pagination"
                                },
                                {
                                    "key": "limit",
                                    "value": "10",
                                    "description": "Number of records per page"
                                },
                                {
                                    "key": "type",
                                    "value": "",
                                    "description": "Type vessel ( Discharging, Loading )"
                                },
                                {
                                    "key": "search",
                                    "value": "",
                                    "description": "Search query data"
                                },
                                {
                                    "key": "sort_by",
                                    "value": "",
                                    "description": "Sort data column"
                                },
                                {
                                    "key": "sort_order",
                                    "value": "",
                                    "description": "Sort order asc or desc"
                                }
                            ]
                        },
                        "description": "Get list vessel"
                    },
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "if (pm.request.url.query && Array.isArray(pm.request.url.query.members)) {",
                                    "    pm.request.url.query.members = pm.request.url.query.members.filter(q => q.value !== '');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                },
                {
                    "name": "Get Vessel Detail",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/vessel/{{vessel_code}}",
                            "host": ["{{base_url}}"],
                            "path": ["api", "vessel", "{{vessel_code}}"]
                        },
                        "description": "Get vessel detail"
                    }
                },
                {
                    "name": "Get Vessel Post Detail",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/vessel/{{vessel_code}}?date={{date}}",
                            "host": ["{{base_url}}"],
                            "path": ["api", "vessel", "{{vessel_code}}", "?date={{date}}"]
                        },
                        "description": "Get vessel Post Detail"
                    }
                }
            ]
        },
        {
            "name": "Palka",
            "item": [
                {
                    "name": "Get Palka",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/palka?page=1&limit=10",
                            "host": ["{{base_url}}"],
                            "path": ["api", "palka"],
                            "query": [
                                {
                                    "key": "page",
                                    "value": "1",
                                    "description": "Page number for pagination"
                                },
                                {
                                    "key": "limit",
                                    "value": "10",
                                    "description": "Number of records per page"
                                },
                                {
                                    "key": "search",
                                    "value": "",
                                    "description": "Search query data"
                                },
                                {
                                    "key": "sort_by",
                                    "value": "",
                                    "description": "Sort data column"
                                },
                                {
                                    "key": "sort_order",
                                    "value": "",
                                    "description": "Sort order asc or desc"
                                }
                            ]
                        },
                        "description": "Get list palka"
                    },
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "if (pm.request.url.query && Array.isArray(pm.request.url.query.members)) {",
                                    "    pm.request.url.query.members = pm.request.url.query.members.filter(q => q.value !== '');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Posts",
            "item": [
                {
                    "name": "Get Post",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/post?page=1&limit=10",
                            "host": ["{{base_url}}"],
                            "path": ["api", "post"],
                            "query": [
                                {
                                    "key": "page",
                                    "value": "1",
                                    "description": "Page number for pagination"
                                },
                                {
                                    "key": "limit",
                                    "value": "10",
                                    "description": "Number of records per page"
                                },
                                {
                                    "key": "sort_by",
                                    "value": "",
                                    "description": "Sort data column"
                                },
                                {
                                    "key": "sort_order",
                                    "value": "",
                                    "description": "Sort order asc or desc"
                                }
                            ]
                        },
                        "description": "Get list post"
                    },
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "if (pm.request.url.query && Array.isArray(pm.request.url.query.members)) {",
                                    "    pm.request.url.query.members = pm.request.url.query.members.filter(q => q.value !== '');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                },
                {
                    "name": "Store Post",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/post",
                            "host": ["{{base_url}}"],
                            "path": ["api", "post"]
                        },
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                { "key": "user", "value": "1", "type": "text" },
                                { "key": "vessel_code", "value": "2", "type": "text" },
                                { "key": "palka", "value": "3", "type": "text" },
                                { "key": "date", "value": "2025-07-22", "type": "text" },
                                { "key": "time", "value": "14:30:00", "type": "text" },
                                { "key": "lat", "value": "-6.200000", "type": "text" },
                                { "key": "long", "value": "106.816666", "type": "text" },
                                { "key": "shift", "value": "1", "type": "text" },
                                {
                                    "key": "photo_vessel",
                                    "type": "file",
                                    "src": "/path/to/photo_vessel.jpg"
                                },
                                {
                                    "key": "photo_selfie",
                                    "type": "file",
                                    "src": "/path/to/photo_selfie.jpg"
                                },
                                { "key": "note", "value": "Catatan tambahan", "type": "text" }
                            ]
                        },
                        "description": "Store Post Vessel"
                    }
                }
            ]
        },
        {
            "name": "Account",
            "item": [
                {
                    "name": "Get Profile",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            },
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/me",
                            "host": ["{{base_url}}"],
                            "path": ["api", "me"]
                        },
                        "description": "Get authenticated user profile"
                    }
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8000",
            "type": "string"
        },
        {
            "key": "access_token",
            "value": "",
            "type": "string"
        }
    ]
}
